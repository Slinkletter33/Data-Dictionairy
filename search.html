---
layout: default
title: Search
---

<h1>Search eVars and Props</h1>
<input type="text" id="search-input" placeholder="Type to search..." onkeyup="searchFunction()">
<ul id="results"></ul>

<script>
    // Array to hold Markdown content
    const markdownFiles = ['eVars.md'];
    let searchData = [];

    // Function to fetch and load Markdown content
    async function loadMarkdown() {
        const promises = markdownFiles.map(async (file) => {
            const response = await fetch(file);
            const text = await response.text();
            const title = file.replace('.md', ''); // Use filename as title
            
            // Create a structured object with sections
            const sections = text.split(/## /).slice(1).map(section => {
                const [header, ...contentParts] = section.split('\n');
                const content = contentParts.join('\n').trim();
                return { header: header.trim(), content: content.trim() };
            });

            searchData.push({ title, sections });
        });
        await Promise.all(promises);
    }

    // Function to highlight the search term
    function highlightText(text, term) {
        const regex = new RegExp(`(${term})`, 'gi');
        return text.replace(regex, '<mark>$1</mark>');
    }

    // Function to search through the loaded content
    function searchFunction() {
        const input = document.getElementById('search-input').value.toLowerCase();
        const results = document.getElementById('results');
        results.innerHTML = '';

        searchData.forEach(item => {
            item.sections.forEach(section => {
                const headerMatch = section.header.toLowerCase().includes(input);
                const contentMatch = section.content.toLowerCase().includes(input);

                if (headerMatch || contentMatch) {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>${headerMatch ? highlightText(section.header, input) : section.header}</strong>: ${highlightText(section.content, input)}`;
                    results.appendChild(li);
                }
            });
        });
    }

    // Load the Markdown files when the page is ready
    window.onload = loadMarkdown;
</script>
